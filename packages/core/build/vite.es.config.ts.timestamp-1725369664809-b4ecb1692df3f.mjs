// build/vite.es.config.ts
import { defineConfig } from "file:///D:/UI%20Library/ui-library/node_modules/.pnpm/vite@5.3.3_@types+node@20.14.10_sass@1.77.7_terser@5.31.2/node_modules/vite/dist/node/index.js";
import { resolve } from "path";
import vue from "file:///D:/UI%20Library/ui-library/node_modules/.pnpm/@vitejs+plugin-vue@5.0.5_vite@5.3.3_@types+node@20.14.10_sass@1.77.7_terser@5.31.2__vue@3.4.31_typescript@5.5.3_/node_modules/@vitejs/plugin-vue/dist/index.mjs";
import dts from "file:///D:/UI%20Library/ui-library/node_modules/.pnpm/vite-plugin-dts@3.9.1_@types+node@20.14.10_rollup@4.18.1_typescript@5.5.3_vite@5.3.3_@types+n_3en7rbkxmpear3yvdsfduxyheu/node_modules/vite-plugin-dts/dist/index.mjs";
import { readdir, readdirSync } from "fs";
import { defer, delay, filter, map } from "file:///D:/UI%20Library/ui-library/node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/lodash.js";
import shell from "file:///D:/UI%20Library/ui-library/node_modules/.pnpm/shelljs@0.8.5/node_modules/shelljs/shell.js";
import { visualizer } from "file:///D:/UI%20Library/ui-library/node_modules/.pnpm/rollup-plugin-visualizer@5.12.0_rollup@4.18.1/node_modules/rollup-plugin-visualizer/dist/plugin/index.js";
import { hooksPlugin as hooks } from "file:///D:/UI%20Library/ui-library/libs/vite-plugins/.dist/index.js";
import terser from "file:///D:/UI%20Library/ui-library/node_modules/.pnpm/@rollup+plugin-terser@0.4.4_rollup@4.18.1/node_modules/@rollup/plugin-terser/dist/es/index.js";
var __vite_injected_original_dirname = "D:\\UI Library\\ui-library\\packages\\core\\build";
var isProd = process.env.NODE_ENV === "production";
var isDev = process.env.NODE_ENV === "development";
var isTest = process.env.NODE_ENV === "test";
function getDirectoriesSync(basePath) {
  const entries = readdirSync(basePath, { withFileTypes: true });
  return map(
    filter(entries, (entry) => entry.isDirectory()),
    // 过滤出所有表示目录的项
    (entry) => entry.name
    // 从过滤后的每个元素中提取出目录名称
  );
}
var TRY_MOVE_STYLES_DELAY = 800;
function moveStyles() {
  readdir("./dist/es/theme", (err) => {
    if (err) return delay(moveStyles, TRY_MOVE_STYLES_DELAY);
    defer(() => shell.mv("./dist/es/theme", "./dist"));
  });
}
var vite_es_config_default = defineConfig({
  plugins: [
    vue(),
    visualizer({
      filename: "dist/stats.es.html"
    }),
    dts({
      tsconfigPath: "../../tsconfig.build.json",
      outDir: "dist/types"
      // 输出路径  类型文件
    }),
    hooks({
      rmFiles: ["./dist/es", "./dist/theme", "./dist/types", "./dist/stats.es.html"],
      afterBuild: moveStyles
    }),
    // 在这里写插件的代码混淆
    terser({
      compress: {
        // 正式环境下删除 console.log
        sequences: isProd,
        arguments: isProd,
        drop_console: isProd && ["log"],
        drop_debugger: isProd,
        passes: isProd ? 4 : 1,
        global_defs: {
          "@DEV": JSON.stringify(isDev),
          "@PROD": JSON.stringify(isProd),
          "@TEST": JSON.stringify(isTest)
        }
      },
      format: {
        semicolons: false,
        shorthand: isProd,
        braces: !isProd,
        beautify: !isProd,
        comments: !isProd
      },
      mangle: {
        toplevel: isProd,
        eval: isProd,
        keep_classnames: isDev,
        keep_fnames: isDev
      }
    })
  ],
  build: {
    outDir: "dist/es",
    minify: false,
    // 关掉默认混淆
    cssCodeSplit: true,
    lib: {
      entry: resolve(__vite_injected_original_dirname, "../index.ts"),
      name: "UiLibrary",
      fileName: "index",
      formats: ["es"]
    },
    rollupOptions: {
      external: [
        "vue",
        "@fortawesome/fontawesome-svg-core",
        "@fortawesome/free-solid-svg-icons",
        "@fortawesome/vue-fontawesome",
        "@popperjs/core",
        "async-validator"
      ],
      output: {
        assetFileNames: (chunkInfo) => {
          if (chunkInfo.name === "style.css") {
            return "index.css";
          }
          if (chunkInfo.type === "asset" && /\.(css)$/i.test(chunkInfo.name)) {
            return "theme/[name].[ext]";
          }
          return chunkInfo.name;
        },
        // 分包相关
        manualChunks(id) {
          if (id.includes("node_modules")) {
            return "vendor";
          }
          if (id.includes("/packages/hooks")) {
            return "hooks";
          }
          if (id.includes("/packages/utils") || id.includes("plugin-vue:export-helper")) {
            return "utils";
          }
          for (const item of getDirectoriesSync("../components")) {
            if (id.includes(`/packages/components/${item}`)) {
              return item;
            }
          }
        }
      }
    }
  }
});
export {
  vite_es_config_default as default
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiYnVpbGQvdml0ZS5lcy5jb25maWcudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImNvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9kaXJuYW1lID0gXCJEOlxcXFxVSSBMaWJyYXJ5XFxcXHVpLWxpYnJhcnlcXFxccGFja2FnZXNcXFxcY29yZVxcXFxidWlsZFwiO2NvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9maWxlbmFtZSA9IFwiRDpcXFxcVUkgTGlicmFyeVxcXFx1aS1saWJyYXJ5XFxcXHBhY2thZ2VzXFxcXGNvcmVcXFxcYnVpbGRcXFxcdml0ZS5lcy5jb25maWcudHNcIjtjb25zdCBfX3ZpdGVfaW5qZWN0ZWRfb3JpZ2luYWxfaW1wb3J0X21ldGFfdXJsID0gXCJmaWxlOi8vL0Q6L1VJJTIwTGlicmFyeS91aS1saWJyYXJ5L3BhY2thZ2VzL2NvcmUvYnVpbGQvdml0ZS5lcy5jb25maWcudHNcIjtpbXBvcnQgeyBkZWZpbmVDb25maWcgfSBmcm9tIFwidml0ZVwiO1xyXG5pbXBvcnQgeyByZXNvbHZlIH0gZnJvbSBcInBhdGhcIjtcclxuaW1wb3J0IHZ1ZSBmcm9tIFwiQHZpdGVqcy9wbHVnaW4tdnVlXCI7XHJcbmltcG9ydCBkdHMgZnJvbSAndml0ZS1wbHVnaW4tZHRzJ1xyXG5pbXBvcnQgeyByZWFkZGlyLCByZWFkZGlyU3luYyB9IGZyb20gXCJmc1wiO1xyXG5pbXBvcnQgeyBkZWZlciwgZGVsYXksIGZpbHRlciwgbWFwIH0gZnJvbSBcImxvZGFzaC1lc1wiO1xyXG5pbXBvcnQgc2hlbGwgZnJvbSBcInNoZWxsanNcIjtcclxuaW1wb3J0IHsgdmlzdWFsaXplciB9IGZyb20gXCJyb2xsdXAtcGx1Z2luLXZpc3VhbGl6ZXJcIjtcclxuaW1wb3J0IHsgaG9va3NQbHVnaW4gYXMgaG9va3MgfSBmcm9tIFwiQHVpLWxpYnJhcnkvdml0ZS1wbHVnaW5zXCI7XHJcblxyXG5pbXBvcnQgdGVyc2VyIGZyb20gJ0Byb2xsdXAvcGx1Z2luLXRlcnNlcidcclxuXHJcblxyXG5cclxuY29uc3QgaXNQcm9kID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwicHJvZHVjdGlvblwiO1xyXG5jb25zdCBpc0RldiA9IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSBcImRldmVsb3BtZW50XCI7XHJcbmNvbnN0IGlzVGVzdCA9IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSBcInRlc3RcIjtcclxuXHJcblxyXG4vLyBcdTYyMTFcdTRFRUNcdTVDMDZcdTYyNDBcdTY3MDlcdTdFQzRcdTRFRjZcdTVCOUFcdTRFNDlcdTYyMTBcdTRFMkFcdTY1NzBcdTdFQzRcclxuY29uc3QgQ09NUF9OQU1FUyA9IFtcclxuICAgIFwiQWxlcnRcIixcclxuICAgIFwiQnV0dG9uXCIsXHJcbiAgICBcIkNvbGxhcHNlXCIsXHJcbiAgICBcIkRyb3Bkb3duXCIsXHJcbiAgICBcIkZvcm1cIixcclxuICAgIFwiSWNvblwiLFxyXG4gICAgXCJJbnB1dFwiLFxyXG4gICAgXCJMb2FkaW5nXCIsXHJcbiAgICBcIk1lc3NhZ2VcIixcclxuICAgIFwiTWVzc2FnZUJveFwiLFxyXG4gICAgXCJOb3RpZmljYXRpb25cIixcclxuICAgIFwiT3ZlcmxheVwiLFxyXG4gICAgXCJQb3Bjb25maXJtXCIsXHJcbiAgICBcIlNlbGVjdFwiLFxyXG4gICAgXCJTd2l0Y2hcIixcclxuICAgIFwiVG9vbHRpcFwiLFxyXG4gICAgXCJVcGxvYWRcIlxyXG5dIGFzIGNvbnN0O1xyXG5cclxuXHJcbi8vIFx1NTQwQ1x1NkI2NVx1ODNCN1x1NTNENlx1NjMwN1x1NUI5QVx1OERFRlx1NUY4NFx1NEUwQlx1NzY4NFx1NjI0MFx1NjcwOVx1NUI1MFx1NzZFRVx1NUY1NVx1NTQwRFx1NzlGMFxyXG4vLyBcdThCRkJcdTUzRDZcdTYzMDdcdTVCOUFcdThERUZcdTVGODRcdTRFMEJcdTc2ODRcdTYyNDBcdTY3MDlcdTVCNTBcdTc2RUVcdTVGNTVcdUZGMENcdTVFNzZcdThGRDRcdTU2REVcdTRFMDBcdTRFMkFcdTUzMDVcdTU0MkJcdThGRDlcdTRFOUJcdTVCNTBcdTc2RUVcdTVGNTVcdTU0MERcdTc5RjBcdTc2ODRcdTY1NzBcdTdFQzRcclxuZnVuY3Rpb24gZ2V0RGlyZWN0b3JpZXNTeW5jKGJhc2VQYXRoOiBzdHJpbmcpIHsgIC8vIFx1NTNDMlx1NjU3MFx1NjYyRlx1ODk4MVx1ODNCN1x1NTNENlx1NUI1MFx1NzZFRVx1NUY1NVx1NzY4NFx1NTdGQVx1Nzg0MFx1OERFRlx1NUY4NFxyXG4gICAgY29uc3QgZW50cmllcyA9IHJlYWRkaXJTeW5jKGJhc2VQYXRoLCB7IHdpdGhGaWxlVHlwZXM6IHRydWUgfSk7ICAvLyBcdThCRkJcdTUzRDZcdTYzMDdcdTVCOUFcdThERUZcdTVGODRcdTRFMEJcdTc2ODRcdTYyNDBcdTY3MDlcdTY1ODdcdTRFRjZcdTU0OENcdTVCNTBcdTc2RUVcdTVGNTUgIFx1NTMwNVx1NTQyQlx1NjU4N1x1NEVGNlx1NEZFMVx1NjA2Rlx1NUJGOVx1OEM2MVxyXG5cclxuICAgIHJldHVybiBtYXAoXHJcbiAgICAgICAgZmlsdGVyKGVudHJpZXMsIChlbnRyeSkgPT4gZW50cnkuaXNEaXJlY3RvcnkoKSksICAvLyBcdThGQzdcdTZFRTRcdTUxRkFcdTYyNDBcdTY3MDlcdTg4NjhcdTc5M0FcdTc2RUVcdTVGNTVcdTc2ODRcdTk4NzlcclxuICAgICAgICAoZW50cnkpID0+IGVudHJ5Lm5hbWUgIC8vIFx1NEVDRVx1OEZDN1x1NkVFNFx1NTQwRVx1NzY4NFx1NkJDRlx1NEUyQVx1NTE0M1x1N0QyMFx1NEUyRFx1NjNEMFx1NTNENlx1NTFGQVx1NzZFRVx1NUY1NVx1NTQwRFx1NzlGMFxyXG4gICAgKTtcclxufVxyXG5cclxuXHJcbi8vIFx1NUMxRFx1OEJENVx1NzlGQlx1NTJBOFx1NjgzN1x1NUYwRlx1NjU4N1x1NEVGNlx1RkYwOC5jc3MgXHU2NTg3XHU0RUY2XHVGRjA5XHU1MjMwXHU2MzA3XHU1QjlBXHU3NkVFXHU1RjU1XHU0RTJEXHJcbi8vIFx1NTk4Mlx1Njc5Q1x1NjU4N1x1NEVGNlx1NzlGQlx1NTJBOFx1NTkzMVx1OEQyNVx1RkYwQ1x1NEYxQVx1NUVGNlx1OEZERlx1NEUwMFx1NkJCNVx1NjVGNlx1OTVGNFx1NTQwRVx1NTE4RFx1NkIyMVx1NUMxRFx1OEJENVx1NzlGQlx1NTJBOFxyXG5jb25zdCBUUllfTU9WRV9TVFlMRVNfREVMQVkgPSA4MDAgYXMgY29uc3Q7XHJcbi8vIGZ1bmN0aW9uIG1vdmVTdHlsZXMoKSB7XHJcbi8vICAgICB0cnkge1xyXG4vLyAgICAgICAgIHJlYWRkaXJTeW5jKFwiLi9kaXN0L2VzL3RoZW1lXCIpXHJcbi8vICAgICAgICAgc2hlbGwubXYoXCIuL2Rpc3QvZXMvdGhlbWVcIiwgXCIuL2Rpc3RcIik7XHJcbi8vICAgICB9IGNhdGNoIChfKSB7XHJcbi8vICAgICAgICAgZGVsYXkobW92ZVN0eWxlcywgVFJZX01PVkVfU1RZTEVTX0RFTEFZKTtcclxuLy8gICAgIH1cclxuLy8gfVxyXG5mdW5jdGlvbiBtb3ZlU3R5bGVzKCkge1xyXG4gICAgcmVhZGRpcihcIi4vZGlzdC9lcy90aGVtZVwiLCAoZXJyKSA9PiB7XHJcbiAgICAgICAgaWYgKGVycikgcmV0dXJuIGRlbGF5KG1vdmVTdHlsZXMsIFRSWV9NT1ZFX1NUWUxFU19ERUxBWSk7XHJcbiAgICAgICAgZGVmZXIoKCkgPT4gc2hlbGwubXYoXCIuL2Rpc3QvZXMvdGhlbWVcIiwgXCIuL2Rpc3RcIikpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcblxyXG5leHBvcnQgZGVmYXVsdCBkZWZpbmVDb25maWcoe1xyXG4gICAgcGx1Z2luczogW1xyXG4gICAgICAgIHZ1ZSgpLFxyXG4gICAgICAgIHZpc3VhbGl6ZXIoe1xyXG4gICAgICAgICAgICBmaWxlbmFtZTogXCJkaXN0L3N0YXRzLmVzLmh0bWxcIixcclxuICAgICAgICB9KSxcclxuICAgICAgICBkdHMoe1xyXG4gICAgICAgICAgICB0c2NvbmZpZ1BhdGg6IFwiLi4vLi4vdHNjb25maWcuYnVpbGQuanNvblwiLFxyXG4gICAgICAgICAgICBvdXREaXI6IFwiZGlzdC90eXBlc1wiLCAgLy8gXHU4RjkzXHU1MUZBXHU4REVGXHU1Rjg0ICBcdTdDN0JcdTU3OEJcdTY1ODdcdTRFRjZcclxuICAgICAgICB9KSxcclxuICAgICAgICBob29rcyh7XHJcbiAgICAgICAgICAgIHJtRmlsZXM6IFtcIi4vZGlzdC9lc1wiLCBcIi4vZGlzdC90aGVtZVwiLCBcIi4vZGlzdC90eXBlc1wiLCBcIi4vZGlzdC9zdGF0cy5lcy5odG1sXCJdLFxyXG4gICAgICAgICAgICBhZnRlckJ1aWxkOiBtb3ZlU3R5bGVzLFxyXG4gICAgICAgIH0pLFxyXG4gICAgICAgIC8vIFx1NTcyOFx1OEZEOVx1OTFDQ1x1NTE5OVx1NjNEMlx1NEVGNlx1NzY4NFx1NEVFM1x1NzgwMVx1NkRGN1x1NkRDNlxyXG4gICAgICAgIHRlcnNlcih7XHJcbiAgICAgICAgICAgIGNvbXByZXNzOiB7XHJcbiAgICAgICAgICAgICAgICAvLyBcdTZCNjNcdTVGMEZcdTczQUZcdTU4ODNcdTRFMEJcdTUyMjBcdTk2NjQgY29uc29sZS5sb2dcclxuICAgICAgICAgICAgICAgIHNlcXVlbmNlczogaXNQcm9kLFxyXG4gICAgICAgICAgICAgICAgYXJndW1lbnRzOiBpc1Byb2QsXHJcbiAgICAgICAgICAgICAgICBkcm9wX2NvbnNvbGU6IGlzUHJvZCAmJiBbXCJsb2dcIl0sXHJcbiAgICAgICAgICAgICAgICBkcm9wX2RlYnVnZ2VyOiBpc1Byb2QsXHJcbiAgICAgICAgICAgICAgICBwYXNzZXM6IGlzUHJvZCA/IDQgOiAxLFxyXG4gICAgICAgICAgICAgICAgZ2xvYmFsX2RlZnM6IHtcclxuICAgICAgICAgICAgICAgICAgICBcIkBERVZcIjogSlNPTi5zdHJpbmdpZnkoaXNEZXYpLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiQFBST0RcIjogSlNPTi5zdHJpbmdpZnkoaXNQcm9kKSxcclxuICAgICAgICAgICAgICAgICAgICBcIkBURVNUXCI6IEpTT04uc3RyaW5naWZ5KGlzVGVzdCksXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBmb3JtYXQ6IHtcclxuICAgICAgICAgICAgICAgIHNlbWljb2xvbnM6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgc2hvcnRoYW5kOiBpc1Byb2QsXHJcbiAgICAgICAgICAgICAgICBicmFjZXM6ICFpc1Byb2QsXHJcbiAgICAgICAgICAgICAgICBiZWF1dGlmeTogIWlzUHJvZCxcclxuICAgICAgICAgICAgICAgIGNvbW1lbnRzOiAhaXNQcm9kLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBtYW5nbGU6IHtcclxuICAgICAgICAgICAgICAgIHRvcGxldmVsOiBpc1Byb2QsXHJcbiAgICAgICAgICAgICAgICBldmFsOiBpc1Byb2QsXHJcbiAgICAgICAgICAgICAgICBrZWVwX2NsYXNzbmFtZXM6IGlzRGV2LFxyXG4gICAgICAgICAgICAgICAga2VlcF9mbmFtZXM6IGlzRGV2LFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0pLFxyXG4gICAgXSxcclxuICAgIGJ1aWxkOiB7XHJcbiAgICAgICAgb3V0RGlyOiBcImRpc3QvZXNcIixcclxuICAgICAgICBtaW5pZnk6IGZhbHNlLCAgLy8gXHU1MTczXHU2Mzg5XHU5RUQ4XHU4QkE0XHU2REY3XHU2REM2XHJcbiAgICAgICAgY3NzQ29kZVNwbGl0OiB0cnVlLFxyXG4gICAgICAgIGxpYjoge1xyXG4gICAgICAgICAgICBlbnRyeTogcmVzb2x2ZShfX2Rpcm5hbWUsIFwiLi4vaW5kZXgudHNcIiksXHJcbiAgICAgICAgICAgIG5hbWU6IFwiVWlMaWJyYXJ5XCIsXHJcbiAgICAgICAgICAgIGZpbGVOYW1lOiBcImluZGV4XCIsXHJcbiAgICAgICAgICAgIGZvcm1hdHM6IFtcImVzXCJdLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcm9sbHVwT3B0aW9uczoge1xyXG4gICAgICAgICAgICBleHRlcm5hbDogW1xyXG4gICAgICAgICAgICAgICAgXCJ2dWVcIixcclxuICAgICAgICAgICAgICAgIFwiQGZvcnRhd2Vzb21lL2ZvbnRhd2Vzb21lLXN2Zy1jb3JlXCIsXHJcbiAgICAgICAgICAgICAgICBcIkBmb3J0YXdlc29tZS9mcmVlLXNvbGlkLXN2Zy1pY29uc1wiLFxyXG4gICAgICAgICAgICAgICAgXCJAZm9ydGF3ZXNvbWUvdnVlLWZvbnRhd2Vzb21lXCIsXHJcbiAgICAgICAgICAgICAgICBcIkBwb3BwZXJqcy9jb3JlXCIsXHJcbiAgICAgICAgICAgICAgICBcImFzeW5jLXZhbGlkYXRvclwiLFxyXG4gICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICBvdXRwdXQ6IHtcclxuICAgICAgICAgICAgICAgIGFzc2V0RmlsZU5hbWVzOiAoY2h1bmtJbmZvKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU5NzAwXHU4OTgxXHU1QzA2IHN0eWxlLmNzcyBcdTY1MzlcdTU0MERcdTRFM0EgaW5kZXguY3NzXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNodW5rSW5mby5uYW1lID09PSBcInN0eWxlLmNzc1wiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcImluZGV4LmNzc1wiO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNodW5rSW5mby50eXBlID09PSBcImFzc2V0XCIgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgL1xcLihjc3MpJC9pLnRlc3QoY2h1bmtJbmZvLm5hbWUgYXMgc3RyaW5nKVxyXG4gICAgICAgICAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTYyNTNcdTUzMDVcdThERUZcdTVGODQgIFx1OEZEOVx1OTFDQ1x1NjIxMVx1NEVFQ1x1NEUwRFx1NEY3Rlx1NzUyOCBoYXNoIFx1NEU4NiAgdGhlbWUvW25hbWVdLVtoYXNoXS5bZXh0XVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJ0aGVtZS9bbmFtZV0uW2V4dF1cIjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNodW5rSW5mby5uYW1lIGFzIHN0cmluZztcclxuICAgICAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAgICAgLy8gXHU1MjA2XHU1MzA1XHU3NkY4XHU1MTczXHJcbiAgICAgICAgICAgICAgICBtYW51YWxDaHVua3MoaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTUzMDVcdTU0MkJcdThGRDlcdTRFMkEgIFx1OEJGNFx1NjYwRVx1NjYyRlx1N0IyQ1x1NEUwOVx1NjVCOVx1NUU5M1x1NUYxNVx1NTE2NSAgXHU1QzMxXHU1NDdEXHU1NDBEXHU1MjMwIHZlbmRvciBcdTUyMDZcdTUzMDVcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaWQuaW5jbHVkZXMoXCJub2RlX21vZHVsZXNcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwidmVuZG9yXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpZC5pbmNsdWRlcyhcIi9wYWNrYWdlcy9ob29rc1wiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJob29rc1wiO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkLmluY2x1ZGVzKFwiL3BhY2thZ2VzL3V0aWxzXCIpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkLmluY2x1ZGVzKFwicGx1Z2luLXZ1ZTpleHBvcnQtaGVscGVyXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcInV0aWxzXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGdldERpcmVjdG9yaWVzU3luYyhcIi4uL2NvbXBvbmVudHNcIilcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTkwNERcdTUzODZcdTYyNDBcdTY3MDlcdTdFQzRcdTRFRjZcdTU0MERcdTVCNTcgICBcdTUzQ0FcdTkwQTNcdTRFMkFcdTZCQ0ZcdTRFMkFcdTdFQzRcdTRFRjZcdTUyMDZcdTUzMDVcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgZ2V0RGlyZWN0b3JpZXNTeW5jKFwiLi4vY29tcG9uZW50c1wiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaWQuaW5jbHVkZXMoYC9wYWNrYWdlcy9jb21wb25lbnRzLyR7aXRlbX1gKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICB9LFxyXG59KTsiXSwKICAibWFwcGluZ3MiOiAiO0FBQTBVLFNBQVMsb0JBQW9CO0FBQ3ZXLFNBQVMsZUFBZTtBQUN4QixPQUFPLFNBQVM7QUFDaEIsT0FBTyxTQUFTO0FBQ2hCLFNBQVMsU0FBUyxtQkFBbUI7QUFDckMsU0FBUyxPQUFPLE9BQU8sUUFBUSxXQUFXO0FBQzFDLE9BQU8sV0FBVztBQUNsQixTQUFTLGtCQUFrQjtBQUMzQixTQUFTLGVBQWUsYUFBYTtBQUVyQyxPQUFPLFlBQVk7QUFWbkIsSUFBTSxtQ0FBbUM7QUFjekMsSUFBTSxTQUFTLFFBQVEsSUFBSSxhQUFhO0FBQ3hDLElBQU0sUUFBUSxRQUFRLElBQUksYUFBYTtBQUN2QyxJQUFNLFNBQVMsUUFBUSxJQUFJLGFBQWE7QUEyQnhDLFNBQVMs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
